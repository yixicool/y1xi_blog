---
title: Grasshopper
top: false
top_img: https://s2.loli.net/2022/04/07/NnPaoOIsXxg21QA.jpg
cover: false
toc: true
mathjax: false
date: 2022-04-07 14:08:19
author: 以西
img:
coverImg:
password:
summary:
categories:
 - 建筑学
 - 软件
tags:
 - 建模
 - 建筑
 - 软件
 - pc
 - 学习指南
 - Rhino
 - Grasshopper
---

Grasshopper的本质是对数据层级逻辑的理解与处理	

gh编程所得物体在rhino中无法编辑，如果需要映射到rhino中，则可以选中gh的模型后鼠标中键或者右键中的`bake`来拷贝出来，然后就可以被选中编辑了

# Grasshopper扩展插件

## 扩展插件的安装

- gha格式文件：进入gh页面 - file - Special Folders - Components Folder，将所需要的插件包粘贴进去（部分插件需要下载安装）

- ghuser格式文件：有一些插件，例如honeybee插件，包含了gha和ghuser两种格式的文件，首先将绿色的gha格式文件还是放入上面讲的components folder，然后将ghuser格式文件放入下面的文件夹：file - Special Folders - User Object Folder

## 常用扩展的简介

GH的插件大都是按照动物名字来命名的，包括Grasshopper自身就是蝗虫的意思，还有承载它运行的Rhino，意为犀牛

- Kangaroo（袋鼠）

  它是非常优秀的一款力学模拟插件。简单地说是用来进行力学仿真，而不是受力分析。比如推力、重力、共面力、风等等。据了解，最常用的功能是在曲面上均布点和让四点共面。当然，它的作用远远不止这些，可以在Kangaroo模拟行走都市，还有水流、星空，几乎任何与宏观力学有关的东西都可以。从Rhino6开始就已经将其内置与GH中，可以直接使用

- WeaveBird（编制鸟）

  GH中最常用的网格编辑工具，包含细分、网格开洞、加厚等常用操作。可以对mesh进行细分、挖洞、加厚等等。

- LunchBox（便当盒）

  功能如其名，一个便当盒，就是便利，没啥大的创新。创建表皮的利器，有矩形分割、三角形分割、菱形分割、六边形分割等网格划分形式，还可以翻转曲面的UV线。可直接创建如莫比乌斯环等独特造型，还蛮方便的一点是与Excel表进行联动。

- Karamba

  个人觉得这个插件似乎是挺专业的有限元分析插件，可以把点和直线当作节点和梁柱输入，它就会算出每个点的受力情况。但是有个问题，就是面对复杂的模型它是要收费的。

- Geco

  该插件负责将GH模型导入Ecotect中进行计算，并返回，结果显示在Rhino里。这些操作都是基于Mesh处理的，大家操作之前要理解Mesh。当然啦，它并不涵盖所有Ecotect的功能，只有两个主要的计算，一个是SolarCalculate，另一个是LightCalculate。

- KuKa

  机器人插件，操纵德国KuKa，这个机器人还可以画肖像，还可以写字，挺好玩的。

- Mosquito（蚊子）

  这个插件可以提取建筑、道路、地图数据、图片、媒体等信息。也可以一键模拟雨水径流分析，还可以提取电脑的音频文件做有趣的声音可视化效果。

- Human

  Human主要与Rhino模型进行交互，可以提取模型材质、文字、图层、线型等信息，是最常用的文件和图形编辑器，有助于方案的可视化表达。它扩展Grasshopper创建和引用包括灯光、块和文本对象的几何图形的属性，比如线宽、颜色、材质、灯光等。它还可以访问Rhino文档的信息，在Grasshopper中读取Rhino图形的属性，比如分组，分层等等。

- HoopSnake 、Anemone

  这两个工具的功能都是循环。会编程的FAN丝们应该知道循环可以完成迭代和递归两种控制结构。当然啦，这不重要，只要记得是循环即可。大家还记得分形吗？分形就是典型的不断循环。比如下图中的树枝不断地细分，但是细分逻辑都是相同的。Anemone这个工具是后出的，逻辑结构更清晰化，当然HoopSnake差别不大，有的人习惯了用Hoop。

- Minimal Surface

  极小曲面插件

- GHowl

  这是一个连接grasshopper和processing的关键插件。可以将processing中的代码拾取到grasshopper，根据代码变化自动生成模型。当然，它还可以跟XML、谷歌地图文件等多种格式文件联动，还有很多物理设备也可以进行联通，比如你的手机。

- FabTools

  FabTools简称FT，FT是一个小工具，主要优点就是可以进行快速标注，而且可以bake很多属性。这在幕墙的编号和标注中起到了不少作用。小编在《丽泽SOHOI》里就有提到对幕墙的标注。可以快速标注和bake很多属性，主要是作用是模型信息化

- Elk

  它可以通过在地图上截图，然后生成这个地方的CAD图。但是要注意哦，Elk支持的地图并不是谷歌地图，网址为（http://www.openstreetmap.org/），相对来说，大城市的还是比较健全的，这一点以后还是需要不断完善

- Galapagos、Octopus

  接下来介绍两个用来优化和筛选结果的工具。尤其是Galapagos，亲测非常有效！这个工具里面涉及到两种算法：遗传算法和退火算法。，Octpous又有什么不一样的呢？区别在于，前者只能优化一个参数，比如窗地比最小，而后者可以同时优化多个参数，比如在窗地比最小的基础上，还要体型系数最小，并且要保证容积率最低

- BIM GeomGym IFC

  目前BIM大火，但是软件之间的格式兼容却不尽人意。最常见的格式就是IFC，这个插件就是实现互换格式的，在ArchiCAD、Revit、Bently、Tekla之间。不过，该插件是收费滴

- Starling

  在处理网格的时候就能显现这个插件的厉害了。原理就是网格的拓补映射

- Chop Chop

  Chop Chop通过点击删除电池连线，免去按足Ctrl再拖线删除之苦。右键弹出菜单可以选择使用Ctrl+鼠标左键或鼠标后退键，双击切换功能开启或关闭。

- Bifocals

  这是由marcsyp开发的小插件，以气泡的方式在每一个电池的上方显示其名称，能帮助快速熟悉电池组的名称及其功能，对grasshopper新手，尤其是在教学中有很大帮助

- Cocoon

  使用Marching Cubes算法将等值面转换为多边形网格，功能类似千足虫插件

- Culebra

  可模拟集群行为，用于可视化与数据的交互

- hummingbird（蜂鸟）

  主要功能是与Revit进行文件交互

- nudibranch

  该插件可实现不同的粒子运动，同时记录粒子在吸引子定义的向量场中移动的轨迹，这些轨迹可以应用到动画模拟中。

- Octopus

  根据遗传算法来优化和筛选结果，相比于GH自带的遗传算法运算器，该插件可同时优化多个参数，效率更高。

- physarealm

  该插件的算法类似蚁群算法，通过模拟细菌在搜索事物过程中延伸卷须，找寻获得食物最有效的路径。它是一种类似于蚁群算法的stigmergy算法。Physarum polycephalum，字面意思是“多头粘液”，是一种粘液霉菌，栖息在阴凉、潮湿的区域，例如腐烂的树叶和原木。当在两个点有燕麦的迷宫中生长时，多头假单胞菌会从迷宫中的任何地方缩回，除了连接两个食物来源的最短路线。这个插件正是模拟这种生物学行为。它可以做一些非常有趣的设计或建筑

- Rabbit

  可以直接在GH中直接构建元胞自动机和L-系统，具有模拟复杂系统时空演化过程的能力。

- shortestwalk

  该插件只包含一个运算器，其作用是构建两点之间的最短路径。

- starling

  网格处理工具，可对物体的网格结构进行重新拓扑映射。

- Millipede

  主要用于结构分析与优化，可对框架结构与壳结构进行快速的线性与弹性分析。还可通过拓扑优化的方法来生成结构体，并以可视化的形式呈现结果。

- IntraLattice

  用于在设计空间内生成晶格单元组合体 ，为结构的设计和优化提供了多种可能性。

- Chromodoris

  其主要功能是可以非常快的进行体素采样、创建iso曲面、网格圆滑、网格分析。该插件创建网格的原理与千足虫插件类似，即通过矢量场来构建等值面。

- Ladybug & Honeybee

  这两个插件可将气象数据加工为可视化的环境分析图形，并完成对日照、环境、人体舒适度等因素的可视化分析。

- Quelea

  Quelea插件可以通过对自然界生物行为的分析，模拟鱼群、鸟群等的运动行为，进一步模拟建筑物中人流的疏散，从而达到优化建筑空间的目的

  Quelea插件与Physarealm插件的使用方法相似，都需要先确定粒子发射器以及模拟的环境，并由主模拟器驱动整个程序运行。

- Bubalus_GH

  解决Rhino模型中添加代理树、车、人等模型的繁琐步骤。

- Bison

  Bison是一款景观建筑插件。它具有地形网格创建、分析、编辑和注释的工具。有很全面的分析系统。

- Sunflower

  简单好用的日照分析插件，上手快运行速度快，非常推荐

- Vipers

  国产插件，好的一点是他的名称说明全部为中文，算是GH运算器的Plus版。

- Pufferfish

  这个插件是一套专注于补间、混合、变形、平均、转换和插值的组件 - 本质上是形状变化

- Culebra

  这个插件是一个 2D|3D 多对象行为库，专注于自定义可视化、数据和性能特征的混合系统交互。它包含用于创建动态多代理交互的对象和行为的集合。模拟对象的集群行为。动漫，游戏行业用的比较多

- Shortest Walk Gh 

  计算最短路径！

- SnappingGecko

  挺喜欢的一个插件！！！简直是强迫症患者的福音，这个插件可以在移动的时候标示并吸附到对齐参考线，吸附范围和力度也可以根据需要自行调节。电池再多也不用怕电池组混乱成一团，再也不用担心GH排版乱啦！ 

- SHIBAINU

  和Lunchbox很像，只不过Lunchbox是创建一些较规则的图案，而SHIBANU是创建日本传统图案。这个插件也很贴心的将输出的面按照不同的规格分开，省了筛选边缘的操作。做做铺装，立面还是杠杠滴

- EvoMass

  这个插件可以用来生成各种各样的建筑体块，和做一些分析。在前期体块推敲时很有用！也可以用来做一些分析图，形体生成等等。用法也很简单，三种不同的体块组合形式，点击Setup设置参数，也可以随机调整，完成之后Bake出来需要的部分就好。设置界面可以调成中文

# Grasshopper运算器名称总结

- 点击上方菜单栏`display`的`draw icons`将电池中的名称改为图标更方便识别

- 每个电池左边为输入，右边为输出

- 初学者可勾选菜单栏`display`的`draw full name`来显示运算的输入、出端的完整名称
- 按住Shift键可以增加多个电池输入端的连线，有些数据要注意连接的先后顺序；按住Ctrl键则是减少电池的连接线，也可以右键菜单里断开指定的连接线。
- 同时按住Ctrl+Shift键，可以同时拖动连接在一个点的多条电池线。双击电池的连接线会自动插入一个中继器。  
- 同时按住Ctrl+Alt键，然后点击工作区的运算器。这个时候GH就会自动显示出运算器在工具列中的位置。

## Params - 参数

Params中大部分黑色图标都为拾取组件，即对应组件要在rhino中拾取后应用

### Geometry - 几何体

- point：点
- curve：曲线
- line：直线
- vector：向量
- rectangle：矩形
- surface：表皮

### Input - 输入

- number slider：拉杆、数字滑动条
  - 双击组件可以进一步调节数据
  - R：浮点数运算
  - N：整数运算
  - E：偶数
  - O：奇数
- boolean toggle：布尔开关
- MD slider：多维滑块。在默认0到1的区间取二维坐标值，可以双击修改自定义区间。多用于曲面归一化后找曲面上点的位置
- graph mapper：函数映射器，右键可以选择不同的函数图表类型，用来改变数据趋势、控制曲线等，双击操作面板进入编辑
- panel：数据显示面板(快捷键//)

# Math

## domain - 区间范围

- construct domain：构造一维区间，用两个值组成一个区间。
- deconstruct domain：分解一维区间，拆分得到区间的大小值。

# Sets

处理数据

## list - 线性数据

连接线为实线

列表是用于管理2个及以上的数据，每个数据有对应的编号（索引），编号从0开始。

数据形式为{0;0} ~~(与python中字典的类型相似)~~

即每个数据都是唯一且不相同的

- insert item：在指定列表的指定序号位置插入指定的数据（可以同时插入多个）。第三项包裹端为布尔值，决定如果序号打入列表总数量是否循环取值。
- list item：取出列表中指定序列号（索引）的数据，第三项包裹端为布尔值，决定当输入的索引序列号大于列表中最大序列号时，是否循环取值
- reverse list：使列表中的数据反向排列，在列表的右键中的反转是同样的作用
- list length：输出列表长度值
- shift list：按照设定的偏移值偏移列表中的数值，第三项包裹输入的布尔值决定是删除偏移的数据还是移动到最后
- sort list：  将列表的数据按从小到大的顺序重新排列。很常用的运算器，比如我想将点按照高度排序，或者根据线长短进行排序等等。配合reverse list可实现倒序排列。

## Sequence - 序列集合

- series：等差数列，根据设定初始值（默认为0）、步长（默认为1）、个数（默认为10），生成一组等差数列。默认生成的数列为0到9十个数字
- cull index：删除指定序号位置的数据，第三项包裹输入布尔值，控制当序号大于列表总数时是否循环删除。
- duplicate data：按设定的次数复制数据，第三项的排序为布尔值，控制列表内容是整体循环复制还是逐个按次数复制
- random reduce：根据设定的数量随机删除数据，随机种子（数字）可以切换不同的随机删除方式。

## tree - 树形数据

连接线为虚线

数据形式为{0;0;0...}

树形数据用于组织两个或两个以上的列表，每个列表的编号规则同列表，也是从0开始。

树形数据中的每个列表是一个树枝，等同于单个数据是一个列表中的元素。

树形数据中的每个树枝有一个路径，用于指定单个列表在树形数据中的位置，任何一个数都可以通过数据元素所在的树枝路径检索出来。



























